<!DOCTYPE html>
<html>
<head>
  <title>Grid</title>
</head>
<body>
  <button onclick="runSnakeLeftToRight()">Snake Left-Right</button>
  <button onclick="reset()">Reset</button>
  <div id="grid"></div>
</body>

<script type="text/javascript">
  var loop;
  var rows = 10;
  var cols = 10;
  var gridDiv = document.getElementById('grid');

  drawGrid(rows, cols);

  function drawGrid(rows, cols) {
    clear();

    var gridTable = document.createElement('table');

    for(var i = 0; i < rows; i++) {
      var row = gridTable.insertRow(i);
      for(var j = 0; j < cols; j++) {
        var cell = row.insertCell(j);
        cell.style.color = 'black';
        cell.style.backgroundColor = 'white';
        cell.style.height = '25px';
        cell.style.width = '25px';
      }
    }

    gridDiv.appendChild(gridTable);
  }

  function stop() {
    clearTimeout(loop);
  }

  function clear() {
    var gridTable = gridDiv.getElementsByTagName('table');
    if(gridTable.length > 0) {
      gridTable[0].parentNode.removeChild(gridTable[0]);
    }
  }

  function reset() {
    stop();
    clear();
  }

  function runSnakeLeftToRight() {
    var iterator = function(row, col, forward) {
      var tbody = gridDiv.getElementsByTagName('table')[0].childNodes[0];
      var cell = tbody.childNodes[row].childNodes[col];
      cell.style.color = 'white';
      cell.style.backgroundColor = 'black';

      // Moving forward means left to right.
      loop = setTimeout(function(row, col, forward) {
        if((!forward && col > 0) || (forward && col < cols - 1)) {
          iterator(row, forward ? ++col : --col, forward);
        }
        else {
          if(row < rows - 1) {
            iterator(++row, forward ? cols - 1 : 0, !forward);
          }
        }
      }, 100, row, col, forward);
    };

    reset();
    drawGrid(rows, cols);
    iterator(0, 0, true);
  }
</script>
</html>
